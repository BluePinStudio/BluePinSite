<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Kickstarter External Goal Estimator</title>
<style>
  :root { --bg:#0e1116; --panel:#151a23; --text:#e6edf3; --muted:#9fb0c0; --accent:#6ea8fe; --ok:#8ce99a; --warn:#ffd43b; --bad:#ffa8a8; }
  * { box-sizing: border-box; }
  body { margin:0; font:16px/1.4 system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; background:linear-gradient(180deg,#0b0f14,#0f141d); color:var(--text); }
  .wrap { max-width:820px; margin:24px auto 80px; padding:0 16px; }
  .card { background:var(--panel); border:1px solid #1f2632; border-radius:16px; box-shadow:0 10px 30px rgba(0,0,0,.25); padding:20px; }
  h1 { margin:0 0 8px; font-weight:800; letter-spacing:.2px; }
  p.lead { margin:0 0 18px; color:var(--muted); }
  .step-title { font-weight:700; margin:0 0 8px; }
  .input { display:flex; gap:10px; align-items:center; background:#0f131b; border:1px solid #20293a; border-radius:12px; padding:12px 14px; }
  .input input[type="number"], .input input[type="text"] { flex:1; background:transparent; border:0; color:var(--text); font-size:16px; outline:none; }
  .hint { color:var(--muted); font-size:13px; margin:8px 0 0; }
  .controls { display:flex; gap:8px; margin-top:16px; }
  button { appearance:none; border:1px solid #2a3447; background:#182031; color:var(--text); padding:10px 14px; border-radius:12px; cursor:pointer; font-weight:700; }
  button.primary { background:linear-gradient(180deg,#2a6df6,#2456c8); border-color:#2456c8; }
  button.ghost { background:transparent; }
  button:disabled { opacity:.5; cursor:not-allowed; }
  .progress { height:8px; background:#121722; border:1px solid #1f2838; border-radius:999px; overflow:hidden; margin:14px 0 6px; }
  .bar { height:100%; width:0%; background:linear-gradient(90deg,#6ea8fe,#8ce99a); }
  .small { font-size:12px; color:var(--muted); }
  .kpi { display:grid; grid-template-columns: repeat(auto-fit,minmax(180px,1fr)); gap:12px; margin-top:16px; }
  .kpi .box { background:#0f131b; border:1px solid #1f2632; border-radius:12px; padding:12px; }
  .kpi .label { color:var(--muted); font-size:12px; }
  .kpi .value { font-size:22px; font-weight:800; margin-top:4px; }
  .mono { font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, monospace; }
  .pill { display:inline-block; background:#0b1220; color:#b8cdfc; border:1px solid #20305a; padding:2px 8px; border-radius:999px; font-size:12px; margin:2px 6px 0 0; }
  .grid { display:grid; grid-template-columns:1fr auto; gap:10px; align-items:center; }
  .list { margin:10px 0 0; padding:0; list-style:none; max-height:180px; overflow:auto; }
  .list li { display:flex; justify-content:space-between; gap:8px; padding:8px 10px; border-bottom:1px dashed #22304a; }
  .list .nm { color:#c8d5e7; }
  .right { text-align:right; }
  .muty { color:var(--muted); }
  .hr { height:1px; background:linear-gradient(90deg,transparent,#22304a,transparent); margin:14px 0; border:0; }
  .center { text-align:center; }
</style>
</head>
<body>
  <div class="wrap">
    <div class="card">
      <h1>Kickstarter External Goal Estimator</h1>
      <p class="lead">Answer a few quick prompts (one at a time). We’ll estimate your backers and external funding goal using your price tiers, ad spend, and social reach.</p>

      <div class="progress" aria-hidden="true"><div class="bar" id="bar"></div></div>
      <div class="small" id="stepCounter">Step 1</div>

      <div id="stage">
        <!-- dynamic content goes here -->
      </div>

      <div class="controls">
        <button id="backBtn" class="ghost">Back</button>
        <button id="nextBtn" class="primary">Next</button>
      </div>
      <div class="small">Formulas: 
        <span class="pill mono">Estimated Backers = Social Reach × 0.02 + Ad Clicks × 0.0075</span>
        <span class="pill mono">Average Pledge = (70×Base + 25×Mid + 5×Premium)/100</span>
        <span class="pill mono">External Goal = Estimated Backers × Avg Pledge × 0.9</span>
      </div>
    </div>
  </div>

<script>
(function(){
  const $ = (sel, el=document) => el.querySelector(sel);
  const $$ = (sel, el=document) => Array.from(el.querySelectorAll(sel));
  const fmtInt = n => Number.isFinite(n) ? Math.round(n).toLocaleString() : '—';
  const money = n => Number.isFinite(n) ? '$' + n.toFixed(2) : '—';
  const num = v => {
    const x = parseFloat(String(v).replace(/,/g,''));
    return Number.isFinite(x) ? x : 0;
  };

  const model = {
    price_base: '',
    price_mid: '',
    price_premium: '',
    ad_spend: '',
    socials: [
      {key:'discord', label:'Discord members', value:''},
      {key:'twitter', label:'Twitter/X followers', value:''},
      {key:'youtube', label:'YouTube subscribers', value:''},
      {key:'bluesky', label:'Bluesky followers', value:''},
      {key:'steamdev', label:'Steam Developer page followers', value:''},
      {key:'tiktok', label:'TikTok followers', value:''},
      {key:'instagram', label:'Instagram followers', value:''},
      {key:'facebook', label:'Facebook followers', value:''},
      {key:'reddit', label:'Reddit subscribers', value:''},
      {key:'linkedin', label:'LinkedIn followers', value:''},
      {key:'email', label:'Email subscribers', value:''},
      {key:'itch', label:'itch.io followers', value:''},
      {key:'newgrounds', label:'Newgrounds fans', value:''},
      {key:'twitch', label:'Twitch followers', value:''}
    ],
    customSocials: []
  };

  let steps = [];
const baseSteps = [
  {
    type: 'price',
    key: 'price_base',
    label: 'Base Pledge Amount',
    hint: 'Typical entry pledge tier (e.g. $20–$30)',
  },
  {
    type: 'price',
    key: 'price_mid',
    label: 'Mid-Tier Pledge Amount',
    hint: 'Includes extras such as artbook or soundtrack (e.g. $30–$50)',
  },
  {
    type: 'price',
    key: 'price_premium',
    label: 'Premium Pledge Amount',
    hint: 'Highest tier with deluxe or physical rewards (e.g. $50–$80+)',
  },
  {
    type: 'ad',
    key: 'ad_spend',
    label: 'Estimated Ad Spend (USD)',
    hint: 'We assume $1.50 per click → Ad Clicks = Ad Spend / 1.5',
  }
];


  function rebuildSteps(){
    steps = [];
    steps.push(...baseSteps);
    model.socials.forEach(s => steps.push({type:'social', social:s}));
    steps.push({type:'customManager'});
    model.customSocials.forEach(s => steps.push({type:'socialCustom', social:s}));
    steps.push({type:'summary'});
  }
  rebuildSteps();

  let idx = 0;

  function totals(){
    const base = num(model.price_base);
    const mid = num(model.price_mid);
    const prem = num(model.price_premium);
    const avgPledge = ((70*base) + (25*mid) + (5*prem)) / 100;
    const socialReach = [...model.socials, ...model.customSocials].reduce((sum,s)=> sum + num(s.value||0), 0);
    const adClicks = num(model.ad_spend) / 1.5;
    const estBackers = (socialReach * 0.02) + (adClicks * 0.0075);
    const extGoal = estBackers * avgPledge * 0.9;
    return {base, mid, prem, avgPledge, socialReach, adClicks, estBackers, extGoal};
  }

  const stage = $('#stage');
  const bar = $('#bar');
  const stepCounter = $('#stepCounter');
  const backBtn = $('#backBtn');
  const nextBtn = $('#nextBtn');

  function setProgress(){
    const pct = (idx / (steps.length - 1)) * 100;
    bar.style.width = Math.max(0, Math.min(100, pct)) + '%';
    stepCounter.textContent = `Step ${Math.min(idx+1, steps.length)} of ${steps.length}`;
    backBtn.disabled = idx === 0;
    nextBtn.textContent = (steps[idx] && steps[idx].type === 'summary') ? 'Recalculate' : 'Next';
  }

  function render(){
    const step = steps[idx];
    setProgress();
    if(!step){ stage.innerHTML = '<p>Done.</p>'; return; }

    function renderInput(label, val, hint){
      return `
        <div class="step">
          <div class="step-title">${label}</div>
          <div class="input"><input id="val" type="number" min="0" step="any" inputmode="decimal" placeholder="Enter a number" value="${val || ''}"/></div>
          <div class="hint">${hint||''}</div>
        </div>`;
    }

    if(step.type === 'price') stage.innerHTML = renderInput(step.label, model[step.key], step.hint);
    if(step.type === 'ad') stage.innerHTML = renderInput(step.label, model.ad_spend, step.hint);
    if(step.type === 'social') stage.innerHTML = renderInput(`How many ${step.social.label}?`, step.social.value, 'Followers/members reachable');
    if(step.type === 'socialCustom') stage.innerHTML = renderInput(`How many ${step.social.label}?`, step.social.value, 'Followers/members reachable');
    $('#val')?.focus();

    if(step.type === 'customManager'){
      const items = model.customSocials.map((c,i)=>`
        <li><span class="nm">${c.label}</span>
        <span><button data-ed="${i}" class="ghost">Edit</button>
        <button data-rm="${i}" class="ghost">Remove</button></span></li>`).join('');
      stage.innerHTML = `
        <div class="step">
          <div class="step-title">Add any other channels?</div>
          <div class="grid">
            <div class="input"><input id="customName" type="text" placeholder="e.g. Threads, Mastodon" /></div>
            <button id="addCustom">Add</button>
          </div>
          <ul class="list">${items || '<li class="muty">No custom channels yet.</li>'}</ul>
        </div>`;
      $('#addCustom').onclick = ()=>{
        const name = $('#customName').value.trim();
        if(!name) return;
        model.customSocials.push({key:'custom_'+Date.now(), label:name, value:''});
        rebuildSteps(); render();
      };
      $$('#stage button[data-rm]').forEach(b=>b.onclick=()=>{model.customSocials.splice(+b.dataset.rm,1); rebuildSteps(); render();});
      $$('#stage button[data-ed]').forEach(b=>b.onclick=()=>{const t=steps.findIndex(s=>s.type==='socialCustom'&&s.social.key===model.customSocials[+b.dataset.ed].key); if(t>-1){idx=t;render();}});
    }

    if(step.type === 'summary'){
      const t = totals();
      stage.innerHTML = `
        <div class="step"><div class="step-title">Results</div>
          <div class="kpi">
            <div class="box"><div class="label">Average Pledge</div><div class="value">${money(t.avgPledge)}</div></div>
            <div class="box"><div class="label">Social Reach</div><div class="value">${fmtInt(t.socialReach)}</div></div>
            <div class="box"><div class="label">Ad Clicks</div><div class="value">${fmtInt(t.adClicks)}</div></div>
            <div class="box"><div class="label">Estimated Backers</div><div class="value">${fmtInt(t.estBackers)}</div></div>
          </div>
          <hr class="hr"/>
          <div class="box"><div class="label">External Kickstarter Goal</div><div class="value" style="font-size:28px">${money(t.extGoal)}</div></div>
        </div>`;
    }
  }

  function commit(){
    const step = steps[idx];
    const valEl = $('#val');
    if(!valEl) return;
    const v = valEl.value.trim();
    if(step.type==='price') model[step.key] = v;
    if(step.type==='ad') model.ad_spend = v;
    if(step.type==='social') step.social.value = v;
    if(step.type==='socialCustom') step.social.value = v;
  }

  $('#backBtn').onclick = ()=>{commit(); idx=Math.max(0,idx-1); render();};
  $('#nextBtn').onclick = ()=>{
    if(steps[idx]?.type==='summary'){ render(); return; }
    commit(); idx=Math.min(steps.length-1,idx+1); render();
  };

  document.addEventListener('keydown',e=>{
    if(e.key==='Enter' && document.activeElement.id==='val'){ e.preventDefault(); $('#nextBtn').click(); }
  });

  render();
})();
</script>

</body>
</html>
